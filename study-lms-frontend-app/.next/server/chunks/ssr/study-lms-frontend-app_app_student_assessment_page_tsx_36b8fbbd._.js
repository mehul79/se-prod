module.exports=[40973,a=>{"use strict";var b=a.i(40648),c=a.i(42538),d=a.i(43608),e=a.i(61045),f=a.i(33567),g=a.i(82440),h=a.i(99015),i=a.i(5266),j=a.i(1140);let k=(0,j.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),l=(0,j.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var m=a.i(64105);function n({open:a,onProceed:d,onDeny:e}){let[g,j]=(0,c.useState)(!1),n=async()=>{j(!0);try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0})).getTracks().forEach(a=>a.stop()),d()}catch(a){console.error("Permission denied:",a),d()}finally{j(!1)}};return(0,b.jsx)(i.Dialog,{open:a,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Enable Webcam & Microphone"}),(0,b.jsx)(i.DialogDescription,{children:"For proctoring purposes, we need access to your webcam and microphone"})]}),(0,b.jsxs)(h.Alert,{className:"border-blue-200 bg-blue-50 text-blue-900 dark:border-blue-900 dark:bg-blue-900/20 dark:text-blue-300",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(h.AlertDescription,{children:"This is required for exam integrity. Your camera and mic will be used only during this assessment."})]}),(0,b.jsxs)("div",{className:"space-y-3 py-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(k,{className:"w-5 h-5 text-primary mt-1 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Webcam"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Access to camera for live monitoring"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(l,{className:"w-5 h-5 text-primary mt-1 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"Microphone"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Access to microphone for audio verification"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:e,disabled:g,children:"Deny"}),(0,b.jsx)(f.Button,{className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",onClick:n,disabled:g,children:g?"Requesting...":"Allow & Continue"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-4",children:"You can change permissions in your browser settings later"})]})})}var o=a.i(62522),p=a.i(65652);function q({duration:a,onTimeUp:d,isRunning:e=!0}){let[f,g]=(0,c.useState)(60*a);(0,c.useEffect)(()=>{if(!e)return;let a=setInterval(()=>{g(b=>b<=1?(clearInterval(a),d(),0):b-1)},1e3);return()=>clearInterval(a)},[e,d]);let h=Math.floor(f/60),i=f<300,j=f<60;return(0,b.jsxs)("div",{className:(0,p.cn)("flex items-center gap-2 px-3 py-2 rounded-lg font-mono text-sm font-bold",j&&"bg-destructive/20 text-destructive animate-pulse",i&&!j&&"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400",!i&&"bg-muted text-foreground"),children:[j||i?(0,b.jsx)(m.AlertCircle,{className:"w-4 h-4"}):(0,b.jsx)(o.Clock,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[String(h).padStart(2,"0"),":",String(f%60).padStart(2,"0")]})]})}let r=(0,j.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),s=(0,j.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),t=(0,j.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function u({value:a,onChange:d,language:e,boilerplate:g,testCases:h}){let i=(0,c.useRef)(null);return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-secondary/50 p-2 rounded-lg border border-border/30",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:"text-xs font-mono text-muted-foreground",children:e.toUpperCase()})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Button,{size:"sm",variant:"ghost",onClick:()=>{i.current&&navigator.clipboard.writeText(a)},className:"text-xs h-8",children:[(0,b.jsx)(s,{className:"w-3 h-3 mr-1"}),"Copy"]}),(0,b.jsxs)(f.Button,{size:"sm",variant:"ghost",onClick:()=>{d(g||"")},className:"text-xs h-8",children:[(0,b.jsx)(t,{className:"w-3 h-3 mr-1"}),"Reset"]}),(0,b.jsxs)(f.Button,{size:"sm",className:"text-xs h-8 bg-primary text-primary-foreground hover:bg-primary/90",children:[(0,b.jsx)(r,{className:"w-3 h-3 mr-1"}),"Run Tests"]})]})]}),(0,b.jsx)("textarea",{ref:i,value:a,onChange:a=>d(a.target.value),className:"w-full h-64 p-4 font-mono text-sm bg-card border border-border/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-foreground",spellCheck:"false"}),h&&h.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Test Cases:"}),(0,b.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:h.map((a,c)=>(0,b.jsxs)("div",{className:"p-2 bg-secondary/30 rounded border border-border/30 text-xs font-mono",children:[(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Input: ",a.input]}),(0,b.jsxs)("div",{className:"text-muted-foreground",children:["Output: ",a.expectedOutput]})]},c))})]})]})}var v=a.i(38418);let w=(0,j.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function x({questions:a,currentQuestionId:c,answeredQuestions:d,onSelectQuestion:e,timeWarning:g}){return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Questions"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:a.map(h=>{let i=d.has(h.id),j=c===h.id,k=g.has(h.id);return(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>e(h.id),className:(0,p.cn)("h-10 relative",j&&"ring-2 ring-primary",i&&"bg-green-100/50 text-green-800 dark:bg-green-900/30 dark:text-green-200",k&&"bg-yellow-100/50 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200"),children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[i?(0,b.jsx)(v.CheckCircle,{className:"w-4 h-4"}):k?(0,b.jsx)(m.AlertCircle,{className:"w-4 h-4"}):(0,b.jsx)(w,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs font-mono",children:a.indexOf(h)+1})]})},h.id)})}),(0,b.jsxs)("div",{className:"space-y-2 pt-3 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Answered"}),(0,b.jsxs)("span",{className:"font-bold text-foreground",children:[d.size,"/",a.length]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Marks"}),(0,b.jsx)("span",{className:"font-bold text-foreground",children:a.reduce((a,b)=>a+b.marks,0)})]})]})]})}let y=(0,a.i(51439).create)((a,b)=>({currentResponse:null,startAssessment:(b,c)=>{a({currentResponse:{id:`response_${Date.now()}`,assessmentId:c,studentId:b,answers:[],startTime:new Date().toISOString(),status:"in_progress"}})},updateAnswer:(b,c)=>{a(a=>{if(!a.currentResponse)return a;let d=a.currentResponse.answers.findIndex(a=>a.questionId===b),e=[...a.currentResponse.answers];return d>=0?e[d]=c:e.push(c),{currentResponse:{...a.currentResponse,answers:e}}})},getAnswer:a=>{let c=b();return c.currentResponse?.answers.find(b=>b.questionId===a)},submitAssessment:()=>{a(a=>a.currentResponse?{currentResponse:{...a.currentResponse,status:"submitted",submitTime:new Date().toISOString()}}:a)}}));var z=a.i(64780),A=a.i(71890);let B=(0,j.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function C(){let a=(0,d.useSearchParams)(),i=(0,d.useRouter)(),j=a.get("assessmentId"),k=(0,z.useAuthStore)(a=>a.currentUser),[l,o]=(0,c.useState)("passcode"),[p,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[v,w]=(0,c.useState)(0),[C,D]=(0,c.useState)(new Set),[E,F]=(0,c.useState)(new Set),G=y(a=>a.startAssessment),H=y(a=>a.updateAnswer),I=y(a=>a.getAnswer),J=y(a=>a.submitAssessment),K=y(a=>a.currentResponse),L=A.mockAssessments.find(a=>a.id===j),M=L?.questions||[],N=M[v];if(!L||!k)return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)(h.Alert,{variant:"destructive",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(h.AlertDescription,{children:"Assessment not found or not authenticated"})]})});let O=(a,b)=>{if(!N)return;let c={questionId:N.id,type:a};"mcq"===a?H(N.id,{...c,selectedOption:b}):H(N.id,{...c,code:b,language:N.language}),C.has(N.id)||D(a=>new Set(a).add(N.id))};if("passcode"===l)return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-secondary flex items-center justify-center p-4",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-md border-border/50",children:[(0,b.jsxs)(e.CardHeader,{className:"space-y-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:L.title}),(0,b.jsx)(e.CardDescription,{children:"Enter the exam passcode to continue"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),p===L.passcode?(o("permissions"),t("")):t("Invalid passcode. Please try again.")},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Passcode"}),(0,b.jsx)(g.Input,{type:"password",placeholder:"Enter passcode",value:p,onChange:a=>r(a.target.value),className:"bg-input border-border/30",required:!0})]}),s&&(0,b.jsxs)(h.Alert,{variant:"destructive",className:"border-destructive/30 bg-destructive/5",children:[(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(h.AlertDescription,{children:s})]}),(0,b.jsxs)("div",{className:"p-3 bg-secondary/30 rounded-lg border border-border/30",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Assessment Details:"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Duration:"}),(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:[L.duration," minutes"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Questions:"}),(0,b.jsx)("span",{className:"font-semibold text-foreground",children:M.length})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Marks:"}),(0,b.jsx)("span",{className:"font-semibold text-foreground",children:L.totalMarks})]})]})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 h-10 font-medium",children:"Continue"})]})})]})});if("assessment"===l&&N){let a=I(N.id);return(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)("div",{className:"hidden lg:block w-72 border-r border-border overflow-y-auto p-6 bg-secondary/30",children:(0,b.jsx)(x,{questions:M,currentQuestionId:N.id,answeredQuestions:C,onSelectQuestion:a=>{let b=M.findIndex(b=>b.id===a);b>=0&&w(b)},timeWarning:E})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"border-b border-border bg-card px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-foreground",children:L.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Question ",v+1," of ",M.length]})]}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsx)(q,{duration:L.duration,onTimeUp:()=>{K?.status==="in_progress"&&(J(),o("submitted"))},isRunning:"assessment"===l})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,b.jsxs)(e.Card,{className:"border-border/50 mb-6",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(e.CardTitle,{className:"text-lg mb-2",children:N.questionText}),(0,b.jsxs)(e.CardDescription,{className:"text-xs",children:["Marks: ",N.marks]})]}),(0,b.jsxs)("span",{className:"text-xs font-mono px-2 py-1 bg-secondary/50 rounded",children:["Q",v+1]})]})}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:["mcq"===N.type&&N.options&&(0,b.jsx)("div",{className:"space-y-2",children:N.options.map((c,d)=>(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-border/30 cursor-pointer hover:bg-secondary/30 transition-colors",children:[(0,b.jsx)("input",{type:"radio",name:`question_${N.id}`,value:d,checked:a?.selectedOption===d,onChange:()=>O("mcq",d),className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm text-foreground",children:c})]},d))}),"coding"===N.type&&(0,b.jsx)(u,{value:a?.code||N.boilerplateCode||"",onChange:a=>O("coding",a),language:N.language||"javascript",boilerplate:N.boilerplateCode,testCases:N.testCases})]})]})}),(0,b.jsxs)("div",{className:"border-t border-border bg-card p-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>w(Math.max(0,v-1)),disabled:0===v,children:"Previous"}),(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>w(Math.min(M.length-1,v+1)),disabled:v===M.length-1,children:"Next"})]}),(0,b.jsxs)(f.Button,{onClick:()=>{confirm("Are you sure you want to submit? You cannot change answers after submission.")&&(J(),o("submitted"))},className:"bg-primary text-primary-foreground hover:bg-primary/90",children:[(0,b.jsx)(B,{className:"w-4 h-4 mr-2"}),"Submit Assessment"]})]})]})]})}return"submitted"===l?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-secondary flex items-center justify-center p-4",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-md border-border/50",children:[(0,b.jsxs)(e.CardHeader,{className:"text-center space-y-2",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,b.jsx)(e.CardTitle,{className:"text-2xl",children:"Assessment Submitted!"}),(0,b.jsx)(e.CardDescription,{children:"Your responses have been recorded"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-secondary/30 rounded-lg border border-border/30 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Questions Answered:"}),(0,b.jsxs)("span",{className:"font-bold text-foreground",children:[C.size,"/",M.length]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Time Used:"}),(0,b.jsxs)("span",{className:"font-bold text-foreground",children:[L.duration," minutes"]})]})]}),(0,b.jsx)(f.Button,{onClick:()=>i.push("/student/dashboard"),className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",children:"Return to Dashboard"})]})]})}):(0,b.jsx)(n,{open:"permissions"===l,onProceed:()=>{G(k.id,j),o("assessment")},onDeny:()=>o("passcode")})}a.s(["default",()=>C],40973)}];

//# sourceMappingURL=study-lms-frontend-app_app_student_assessment_page_tsx_36b8fbbd._.js.map